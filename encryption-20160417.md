简单加密解密的Java实现(一)
=======
Date: 2015-08-26 00:36:32
Categories: timeline  
******

由于工作需要简单的了解了一下常用的加密解密算法，需求很简单，就是要把发送到服务器的数据和从服务器返回给客户端的数据都简单加密一下。虽然是完全没有接触过的东西，但是有Google在，自然不用太过担心。搜索一下，很快就找到了RSA加密算法的Java实现。  

- [对称加密](https://zh.wikipedia.org/wiki/%E5%B0%8D%E7%A8%B1%E5%AF%86%E9%91%B0%E5%8A%A0%E5%AF%86)  

- [非对称加密](https://zh.wikipedia.org/wiki/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86)

- [RSA加密](https://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95)  

- [DES加密](https://zh.wikipedia.org/wiki/%E8%B3%87%E6%96%99%E5%8A%A0%E5%AF%86%E6%A8%99%E6%BA%96)  

- [AES加密](https://zh.wikipedia.org/wiki/%E9%AB%98%E7%BA%A7%E5%8A%A0%E5%AF%86%E6%A0%87%E5%87%86)

以上链接指向的是wiki页面，这里有关于这个算法的详细介绍，所有链接都是为了写这篇博客才去找到并粗略阅读了第一遍的。简单来说，对称加密和非对称加密的主要区别就是加密和解密所用的密钥对，对称加密就是加密和解密用的都是同一个密钥；非对称加密则需要一对密钥分别用于加密和解密，公布出去叫做公钥，不公开就是私钥，一般多用公钥加密私钥解密，一般的意思就是，也可以反过来，私钥加密公钥解密。 

作为一个不合格的程序员，理所当然的不会“浪费时间”去读这些没用的文档，在拿到需求后的第一时间我就去Google上抄来了一段代码，这段代码用的就是RSA加密，代码贴到IDE里面发现报错了，需要一对密钥分别用于加密和解密，需要一对密钥，那么RSA自然也就属于非对称加密算法的一种了。于是又去Google上找到使用openssl生成密钥对的方法，接下来就是要让代码跑起来测试一下了。我用的是1024位的密钥，测试代码跑起来一切正常，看着终端里被加密的字符串解密后原样输出，即便是抄来的代码，但还是有点莫名其妙的小得意。再接下来就是把这段代码稍微整理成一个工具类，放到项目里使用了。  

再熟悉不过的场景，明明跑的好好的代码，换个地方跑一下居然就出问题了。  只好再去Google上找答案，然后发现RSA加密的数据，长度不能超过密钥长度，而且RSA一类的对称加密也因为其速度较慢，密钥对生成维护成本过高，不建议用来加密大量数据，牛人写的博客，不单单只是告诉你这个东西不适合用，还会推荐一个适合你的需求的东西。于是又抄了段DES非对称加密算法的代码，这次比较顺利，放到项目里去做加密解密都很正常，速度也可以接受。再一次莫名其妙的小得意。  

为什么又出现了新的段落？你猜的没错，因为又出现新的问题了。同事review我提交的代码后，委婉的指出，使用DES加密是可以的，每次随机生成密钥也是可以的，但是把密钥和加密后的数据一起发给服务器，如果数据被劫持，别人同时得到了密钥和密文，加密还有什么意义呢？已经说过，牛人指出你的错误后，一般都会给你另一条生路的。于是最后项目的加密方案就是结合两种加密方式，各取所长。  

**随机生成AES加密密钥，然后用AES算法给数据加密，再用RSA给AES加密密钥加密，给服务器发送加密后的数据密文和RSA加密过的AES密钥**  

AES算法同DES算法一样是对称加密算法，现在一般都用AES来代替DES加密。原因？我还不知道。知道了会来更新的。

谢谢你读完了:)  

******
Version: 1.0  

Date: 2016-04-17 22:32:34  

Categories: Java, Encryption